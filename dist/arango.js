/*Copyright (c) Kaerus 2012 (kaerus.com), Anders Elo <anders @ kaerus com>*/
define("utils",["require"],function(e){function t(){var e=!1,n={},r=0;typeof arguments[r]=="boolean"&&(e=arguments[r++]),typeof arguments[r+1]=="object"&&(n=arguments[r++]);for(var i;i=arguments[r];r++)n=Object.keys(i).reduce(function(n,r){return i.hasOwnProperty(r)&&(typeof i[r]=="object"?e&&(n[r]=t(!0,n[r],i[r])):i[r]&&(n[r]=i[r])),n},n);return n}function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e){if(!(this instanceof r))return new r;this._events={}}function i(e){var t=/^(?:([A-Za-z]+):)?(\/{0,3})(?:([^\x00-\x1F\x7F:]+)?:?([^\x00-\x1F\x7F:]*)@)?([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^\x00-\x1F\x7F]+))?$/,n=t.exec(e);if(!n)return!1;var r=/^([\w\-]+)?(?:#([\w\-]+))?(?:\:([\w\-]+))?(?:\?(.*))?$/,i=r.exec(n[7]);return n?{uriparts:n,protocol:n[1],username:n[3],password:n[4],hostname:n[5],port:n[6],path:i?{first:i[1],hash:i[2],base:i[3],query:i[4],string:n[7]}:n[7]}:!1}return r.prototype.on=function(e,t){return e in this._events||(this._events[e]=[]),this._events[e].indexOf(t)<0&&this._events[e].push(t),this},r.prototype.off=function(e,t){if(!this._events[e])return this;var n=this._events[e].indexOf(t);return n>=0&&(this._events[e].splice(n,1),this._events[e].length===0&&delete this._events[e]),this},r.prototype.emit=function(e){if(!this._events[e])return!1;var t=Array.prototype.slice.call(arguments,1),n,r=[],i=!1;for(var s=0,o=this._events[e].length;s<o;s++){n=this._events[e][s];if(typeof n=="function"){if(n.apply(this,t)===!1){i=!0;break}}else{if(typeof n!="object")throw"No valid event handler found";typeof n.after=="function"&&r.push(n.after)}}return r.forEach(function(e){i||e.apply(this,t)===!1&&(i=!0)}),this},r.prototype.once=function(e,t){var n=this;return this.on(e,function r(){n.off(e,r),t.apply(this,arguments)}),this},r.prototype.after=function(e,t){return e in this._events||(this._events[e]=[]),this._events[e].indexOf({after:t})<0&&this._events[e].push({after:t}),this},{extend:t,inherit:n,Emitter:r,parseUrl:i}}),define("action",["require","./utils"],function(e){var t=e("./utils");return function(e){function r(){}var n=e._X_;return r.prototype.define=function(e,r,i){function o(){var e=Array.prototype.splice.call(arguments);return e[0]&&typeof e[0]=="object"&&t.extend(!0,i,e.shift()),e.unshift(r.path?r.path.string?r.path.string:r.path:""),e.unshift(i),n.raw.apply(s,e)}var s=this;return typeof e!="string"||typeof r!="string"?!1:(r=t.parseUrl(r))?(i||(i={}),i.method=i.method?i.method.toUpperCase():"GET",i.protocol=r.protocol||"http",i.hostname=r.hostname||"127.0.0.1",i.port=parseInt(r.port,10)||80,this[e]=o,this):!1},new r}}),define("query",["require","./utils"],function(e){var t=e("./utils");return function(e){function n(){function r(n){var i=n||t.struct;return e.filter(function(e){return i[e]?!0:!1}).map(function(e){var t=e.toUpperCase(),n=i[e];switch(t){case"FROM":t="IN";break;case"INCLUDE":t="";break;default:}if(typeof n=="object"){var s=r(n);return e==="in"?t+" ( "+s+" )":t+" "+s}return t+" "+n}).join(" ")}var e=["for","in","filter","from","include","collect","into","sort","limit","return"],t=this;e.forEach(function(e){t[e]=function(){t.struct||(t.struct={});if(!arguments.length)return t.struct[e];var r=Array.prototype.slice.call(arguments);return typeof r[0]=="function"?t.struct[e]=function(e){var t=new n;return e.apply(t),t.struct}(r[0]):t.struct[e]=r.join(" "),t}}),t.toString=r}function r(){function i(n,i){var s,o=0,u=Array.prototype.slice.call(i);return r.string?s=t.extend({query:r.string},r.options):typeof u[o]=="string"?s=t.extend({query:u[o++]},r.options):typeof u[o]=="object"&&u[o].struct?s=t.extend({query:u[o++].struct.toString()},r.options):s=t.extend({query:u[o++].toString()},r.options),typeof u[o]=="object"&&t.extend(s,{bindVars:u[o++]}),e.cursor[n](s,u[o])}var r=this;n.call(this),r.string={},r.new=function(){return new n},Object.defineProperty(this,"string",{get:function(){return r.struct?r.toString():this._string},set:function(e){this._string=e,r.struct=null}}),r.options={},r.count=function(e){return r.options.count=e>0?!0:!1,r.options.batchSize=e>0?e:undefined,r},r.test=function(){return i("query",arguments)},r.explain=function(){return i("explain",arguments)},r.exec=function(){var t=function(e){this.emit("error",e)},n=function(r,i){e.cursor.get(r.id,callback).on("result",n).on("error",t),this.emit("next",r,i)},r=i("create",arguments).on("result",n)}}return t.inherit(r,n),new r}}),define("ajax",["require","./utils"],function(e){function r(e,t){var n={NOXHR:[1e3,"Ajax is not supported"],REQUEST:[1001,"Request operation failed"],UNIMPLEMENTED:[1002,"no such feature"]};return{name:"Ajax",type:e,code:n[e][0],message:n[e][1]+(t?": "+t:"")}}function c(e,t){n.Emitter.call(this),this.data=[],this.data.size=0,this.on("response",t),this.after("end",function(){e.close()}),this.after("error",function(){e.close()})}function h(t,l){(function(){if(i==="nodejs"){var n=e(t.protocol||"http").request;h=function(e,t){return console.log("Ajax Request %j",e),delete e.protocol,e.timeout&&(n.socket.setTimeout(e.timeout),delete e.timeout),n(e,t)}}})();if(!(this instanceof h))return new h(t,l);var p=this;p._send=[],p.xhr=new i,n.Emitter.call(this),t.timeout?(p._timeout=t.timeout,delete t.timeout):p._timeout=5e3,p.timeoutHandler=function(){p.xhr.abort()},p.response=new c(p,l),p.response.emit("response",p.response),p.xhr.onreadystatechange=function(){switch(p.xhr.readyState){case f:p.response.statusCode=p.xhr.status,p.response.headers||(p.response.headers=p.parseHeaders()),p.response.writeChunk(p.xhr.responseText),p.xhr.status?p.response.emit("end"):p.response.emit("error",r("REQUEST",p.xhr.statusText));break;case a:p.response.headers=p.parseHeaders(),p.response.writeChunk(p.xhr.responseText);break;case u:p.emit("ready");break;case o:break;case s:}},p.on("open",p.startTimer),p.on("close",p.clearTimer),p.request(t,l)}var t=typeof window=="object",n=e("./utils"),i=t?function(){var e,t;if(typeof window.XMLHttpRequest!="undefined")return window.XMLHttpRequest;if(typeof window.ActiveXObject!="undefined"){e="ActiveXObject";var n=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];for(var i=0,s=n.length;i<s;i++)try{return new window.ActiveXObject(n[i]),window.ActiveXObject(n[i])}catch(o){}throw r("NOXHR","XHR ActiveXObject failed")}throw r("NOXHR","XHR support not found")}():"nodejs",s=0,o=1,u=2,a=3,f=4,l=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];return n.inherit(c,n.Emitter),c.prototype.write=function(e){this.data.push(e),this.data.size+=e.length,this.emit("data",this.data[this.data.length-1])},c.prototype.writeChunk=function(e){e.length>this.data.size&&this.write(e.slice(this.data.size))},n.inherit(h,n.Emitter),h.prototype.write=function(e){return this._send.push(e),this},h.prototype.end=function(e){e&&this._send.push(e),this.xhr.send(this._send.length>0?this._send.join(""):null)},h.prototype.close=function(){this.emit("close")},h.prototype.parseHeaders=function(){var e={},t,n,r,i=this.xhr.getAllResponseHeaders();return i.split("\n").forEach(function(i){r=i.indexOf(":"),t=i.slice(0,r).replace(/^[\s]+|[\s]+$/g,"").toLowerCase(),n=i.slice(r+1,i.length).replace(/^[\s]+|[\s]+$/g,""),t&&t.length&&(e[t]=n)}),e},h.prototype.request=function(e,n){var r=e.protocol==="file"&&t,i=r?"http://127.0.0.1:8529"+e.path:e.protocol+"://"+e.hostname+":"+e.port+e.path;e.method=e.method||"GET",e.headers||(e.headers={}),e.headers["content-type"]||(e.headers["content-type"]="application/json"),console.log("Ajax Request %s %s",e.method,i),this.xhr.open(e.method,i,!0),this.emit("open",e.method,i),Object.keys(e.headers).forEach(function(n){n=n.toLowerCase(),(!t||l.indexOf(n)<0)&&this.xhr.setRequestHeader(n,e.headers[n])},this)},h.prototype.startTimer=function(){this.timer=setTimeout(this.timeoutHandler,this._timeout)},h.prototype.clearTimer=function(){clearTimeout(this.timer)},h.prototype.resetTimer=function(){clearTimeout(this.timer),this.startTimer()},{request:h}}),define("request",["require","./utils","./ajax"],function(e){var t=e("./utils"),n=e("./ajax");return function(e){function r(r,i,s,o){function h(e,t,n){a.error={code:t,message:n},o?o(e&&t,e?n:a.result||a.data,a.headers):e?a.emit("error",a.error):a.emit("result",a.result||a.data,a.headers)}t.Emitter.call(this);try{s=s&&!s.length?new Buffer(JSON.stringify(s)):s}catch(u){s=JSON.stringify(s)}var a=this,f=[],l=t.extend(!0,{path:i,headers:{"content-type":"application/json",connection:"keep-alive","content-length":s?s.length:0}},e.server,r),c=n.request(l,function(e){typeof e.data!="object"&&(e.data=[],e.on("data",function(t){e.data.push(t)})),e.on("end",function(){a.headers=e.headers;if(e.data.length>0)try{a.result=JSON.parse(e.data.join(""))}catch(t){a.data=e.data}a.result?h(a.result.error,e.statusCode,a.result.errorMessage):(e.error===undefined&&(e.error=!0),h(e.error,e.statusCode,e.message))})}).on("error",function(e){h(!0,e.code,e.message)});s&&c.write(s),c.end()}return t.inherit(r,t.Emitter),{post:function(e,t,n){return new r({method:"POST"},e,t,n)},get:function(e,t){return new r({method:"GET"},e,null,t)},put:function(e,t,n){return new r({method:"PUT"},e,t,n)},"delete":function(e,t){return new r({method:"DELETE"},e,null,t)},patch:function(e,t,n){return new r({method:"PATCH"},e,t,n)},head:function(e,t){return new r({method:"HEAD"},e,null,t)},raw:function(e,t,n,i){return new r(e,t,n,i)}}}}),define("api/cursor",["require"],function(e){return function(e){var t=e._X_,n="/_api/cursor/";return{get:function(e,r){return t.put(n+e,{},r)},create:function(e,r){return t.post(n,e,r)},query:function(e,n){return t.post("/_api/query",e,n)},explain:function(e,n){return t.post("/_api/explain",e,n)},"delete":function(e,r){return t.delete(n+e,r)}}}}),define("api/collection",["require"],function(e){return function(e){var t=e._X_,n="/_api/collection/";return{create:function(){var r=e.name,i={},s,o=0;return typeof arguments[o]=="string"&&(r=arguments[o++]),typeof arguments[o]=="object"&&(i=arguments[o++]),typeof arguments[o]=="function"&&(s=arguments[o++]),i.name||(i.name=r),t.post(n,i,s)},get:function(e,r){return t.get(n+e,r)},"delete":function(e,r){return t.delete(n+e,r)},truncate:function(e,r){return t.put(n+e+"/truncate",null,r)},count:function(e,r){return t.get(n+e+"/count",r)},figures:function(e,r){return t.get(n+e+"/figures",r)},list:function(e){return t.get(n,e)},load:function(e,r){return t.put(n+e+"/load",null,r)},unload:function(e,r){return t.put(n+e+"/unload",null,r)},rename:function(e,r,i){return typeof r=="string"&&(r={name:r}),t.put(n+e+"/rename",r,i)},getProperties:function(e,r){return t.get(n+e+"/properties",r)},setProperties:function(e,r,i){return t.put(n+e+"/properties",r,i)}}}}),define("api/document",["require"],function(e){return function(e){function i(e,n,r,i){var s={};return s[e]=JSON.stringify(r),t.raw({headers:s},n,null,i)}function s(e,n,r,i,s){var o={};return o[e]=JSON.stringify(r),t.raw({method:"PUT",headers:o},n,i,s)}var t=e._X_,n="/_api/document/",r="/_api/document?collection=";return{create:function(){var n=e.name,i={},s="",o,u=0;return typeof arguments[u]=="boolean"&&(s="&createCollection=true",u++),typeof arguments[u]=="string"&&(n=arguments[u++]),typeof arguments[u]=="object"&&(i=arguments[u++]),typeof arguments[u]=="function"&&(o=arguments[u++]),t.post(r+n+s,i,o)},get:function(e,r){return t.get(n+e,r)},getIfNoneMatch:function(e,t,r){return i("If-None-Match",n+e,t,r)},getIfMatch:function(e,t,r){return i("If-Match",n+e,t,r)},put:function(e,r,i){return t.put(n+e,r,i)},putIfNoneMatch:function(e,t,r,i){return s("if-none-match",n+e,t,r,i)},putIfMatch:function(e,t,r,i){return s("if-match",n+e,t,r,i)},head:function(e,r){return t.head(n+e,r)},patch:function(e,r,i){return t.patch(n+e,r,i)},"delete":function(e,r){return t.delete(n+e,r)},list:function(){var n=e.name,i,s=0;return typeof arguments[s]=="string"&&(n=arguments[s++]),typeof arguments[s]=="function"&&(i=arguments[s++]),t.get(r+n,i)},"import":function(){var t=e.name,n={},r="",i,s=0;typeof arguments[s]=="boolean"&&(r="&createCollection=true",s++),typeof arguments[s]=="string"&&(t=arguments[s++]),typeof arguments[s]=="object"&&(n=arguments[s++]),typeof arguments[s]=="function"&&(i=arguments[s++])}}}}),define("api/index",["require"],function(e){return function(e){var t=e._X_,n="/_api/index/",r="/_api/index?collection=";return{get:function(e,r){return t.get(n+e,r)},create:function(){var n=e.name,i={},s,o=0;return typeof arguments[o]=="string"&&(n=arguments[o++]),typeof arguments[o]=="object"&&(i=arguments[o++]),typeof arguments[o]=="function"&&(s=arguments[o++]),t.post(r+n,i,s)},"delete":function(e,r){return t.delete(n+e,r)},list:function(){var n=e.name,i,s=0;return arguments.length>0&&(typeof arguments[s]=="string"&&(n=arguments[s++]),typeof arguments[s]=="function"&&(i=arguments[s++])),t.get(r+n,i)}}}}),define("api/edge",["require"],function(e){return function(e){function s(e,n,r,i){var s={};return s[e]=JSON.stringify(r),t.raw({headers:s},n,null,i)}function o(e,n,r,i,s){var o={};return o[e]=JSON.stringify(r),t.raw({method:"PUT",headers:o},n,i,s)}var t=e._X_,n="/_api/edge/",r="/_api/edge?collection=",i="/_api/edges/";return{get:function(e,r){return t.get(n+e,r)},getIfNoneMatch:function(e,t,r){return s("If-None-Match",n+e,t,r)},getIfMatch:function(e,t,r){return s("If-Match",n+e,t,r)},create:function(){var n,i,s,o={},u,a=0;return typeof arguments[a]=="string"&&(n=arguments[a++]),typeof arguments[a]=="string"&&(i=arguments[a++]),typeof arguments[a]=="string"&&(s=arguments[a++]),typeof arguments[a]=="object"&&(o=arguments[a++]),typeof arguments[a]=="function"&&(u=arguments[a++]),s||(s=i,i=n,n=e.name),t.post(r+n+"&from="+i+"&to="+s,o,u)},put:function(e,r,i){return t.put(n+e,r,i)},putIfNoneMatch:function(e,t,r,i){return o("if-none-match",n+e,t,r,i)},putIfMatch:function(e,t,r,i){return o("if-match",n+e,t,r,i)},head:function(e,r){return t.head(n+e,r)},patch:function(e,r,i){return t.patch(n+e,r,i)},"delete":function(e,r){return t.delete(n+e,r)},list:function(){var n,r,s,o,u=0;arguments.length>0&&(typeof arguments[u]=="string"&&(n=arguments[u++]),typeof arguments[u]=="string"&&(r=arguments[u++]),typeof arguments[u]=="string"&&(s=arguments[u++]),typeof arguments[u]=="function"&&(o=arguments[u++])),s||(s=r||"any",r=n,n=e.name);var a="?vertex="+r+"&direction="+s;return t.get(i+n+a,o)}}}}),define("api/key",["require"],function(e){return function(e){function i(e,n,r,i,s){var o={},u;return typeof r.expires=="object"?u=r.expires:u=new Date(Date.parse(r.expires,"yyyy-MM-dd HH:MM:SS")),o["x-voc-expires"]=u.toISOString(),r.extended&&(o["x-voc-extended"]=JSON.stringify(r.extended)),t.raw({method:e,headers:o},n,i,s)}function s(e){return e.replace(/^[.\/]*/,"")}var t=e._X_,n="/_api/key/",r="/_api/keys/";return{get:function(){var r=e.name,i,o,u=0;return typeof arguments[u+1]=="string"&&(r=arguments[u++]),typeof arguments[u]=="string"&&(i=arguments[u++]),typeof arguments[u]=="function"&&(o=arguments[u++]),t.get(n+r+"/"+s(i),o)},create:function(){var t=e.name,r,o={},u={},a,f=0;return typeof arguments[f+1]=="string"&&(t=arguments[f++]),typeof arguments[f]=="string"&&(r=arguments[f++]),o=arguments[f++],u=arguments[f++],typeof arguments[f]=="function"&&(a=arguments[f++]),i("POST",n+t+"/"+s(r),o,u,a)},put:function(){var t=e.name,r,o={},u={},a,f=0;return typeof arguments[f+1]=="string"&&(t=arguments[f++]),typeof arguments[f]=="string"&&(r=arguments[f++]),o=arguments[f++],u=arguments[f++],typeof arguments[f]=="function"&&(a=arguments[f++]),i("PUT",n+t+"/"+s(r)+"?create=1",o,u,a)},list:function(){var n=e.name,i,o,u=0;return typeof arguments[u+1]=="string"&&(n=arguments[u++]),typeof arguments[u]=="string"&&(i=arguments[u++]),typeof arguments[u]=="function"&&(o=arguments[u++]),t.get(r+n+"/"+s(i),o)},"delete":function(){var r=e.name,i,o,u=0;return typeof arguments[u+1]=="string"&&(r=arguments[u++]),typeof arguments[u]=="string"&&(i=arguments[u++]),typeof arguments[u]=="function"&&(o=arguments[u++]),t.delete(n+r+"/"+s(i),o)}}}}),define("api/admin",["require"],function(e){return function(e){var t=e._X_,n="/_admin/";return{status:function(e){return t.get(n+"status",e)},log:function(){var e="",r,i=0;return typeof arguments[i]=="string"&&(severity="?level="+arguments[i++]),typeof arguments[i]=="object"&&Object.keys(arguments[i++]).forEach(function(e){severity+=severity.length?"&":"?",severity+=e+"="+arguments[i][e]}),typeof arguments[i]=="function"&&(r=arguments[i++]),t.get(n+"log"+severity,r)},getConfig:function(e){return t.get(n+"config/configuration",e)},describeConfig:function(e){return t.get(n+"config/description",e)},listUsers:function(e){return t.get(n+"user-manager/users",e)},getUser:function(e,r){return t.get(n+"user-manager/user/"+e,r)},routes:function(e){return t.get(n+"routing/routes",e)},routesReload:function(e){return t.get(n+"routing/reload",e)}}}}),define("api/simple",["require"],function(e){return function(e){function s(e,t){return typeof t=="object"&&Object.keys(t).forEach(function(n){switch(n){case"from":e.left=t[n],e.closed=!0;break;case"to":e.right=t[n],e.closed=!0;break;default:e[n]=t[n]}r&&!e.skip&&(e.skip=r),i&&!e.limit&&(e.limit=i)}),e}var t=e._X_,n="/_api/simple/",r,i;return{list:function(){var r={collection:e.name},i=0,o,u;return typeof arguments[i]=="string"&&(r.collection=arguments[i++]),typeof arguments[i]=="object"&&(o=arguments[i++]),typeof arguments[i]=="function"&&(u=arguments[i++]),t.put(n+"all",s(r),u)},example:function(){var r={collection:e.name},i=0,o,u;return typeof arguments[i]=="string"&&(r.collection=arguments[i++]),typeof arguments[i]=="object"&&typeof arguments[i+1]=="object"&&(o=arguments[i++]),typeof arguments[i]=="object"&&(r.example=arguments[i++]),typeof arguments[i]=="function"&&(u=arguments[i++]),t.put(n+"by-example",s(r),u)},first:function(){var r={collection:e.name},i=0,s,o;return typeof arguments[i]=="string"&&(r.collection=arguments[i++]),typeof arguments[i]=="object"&&(r.example=arguments[i++]),typeof arguments[i]=="function"&&(o=arguments[i++]),t.put(n+"first-example",r,o)},range:function(){var r={collection:e.name},i=0,o,u;return typeof arguments[i]=="string"&&(r.collection=arguments[i++]),typeof arguments[i]=="object"&&(o=arguments[i++]),typeof arguments[i]=="function"&&(u=arguments[i++]),t.put(n+"range",s(r),u)},near:function(){var r={collection:e.name},i=0,o,u;return typeof arguments[i]=="string"&&(r.collection=arguments[i++]),typeof arguments[i]=="object"&&(o=arguments[i++]),typeof arguments[i]=="function"&&(u=arguments[i++]),t.put(n+"near",s(r),u)},within:function(){var r={collection:e.name},i=0,o,u;return typeof arguments[i]=="string"&&(r.collection=arguments[i++]),typeof arguments[i]=="object"&&(o=arguments[i++]),typeof arguments[i]=="function"&&(u=arguments[i++]),t.put(n+"within",s(r),u)},skip:function(e){r=e},limit:function(e){i=e}}}}),define("arango",["require","./utils","./action","./query","./action","./request","./api/cursor","./api/collection","./api/document","./api/index","./api/edge","./api/key","./api/admin","./api/simple"],function(e){function o(){if(!(this instanceof o))return new o.apply(null,arguments);this.use.apply(this,arguments),Object.defineProperty(this,"server",{get:function(){return{protocol:this.protocol,hostname:this.hostname,port:this.port}}}),this._X_={};var e=r.request(this);for(var t in e)this._X_[t]=e[t];for(var n in r.api)this[n]=r.api[n](this);this.query=r.query(this),this.action=r.action(this)}var t=typeof window=="object"&&window.hasOwnProperty("location"),n=t?window.location:!1,r={},i=e("./utils"),s=e("./action");return r.query=e("./query"),r.action=e("./action"),r.request=e("./request"),r.api={cursor:e("./api/cursor"),collection:e("./api/collection"),document:e("./api/document"),index:e("./api/index"),edge:e("./api/edge"),key:e("./api/key"),admin:e("./api/admin"),simple:e("./api/simple")},o.prototype.use=function(){for(var e=0,t;t=arguments[e];e++)if(t instanceof o)i.extend(this,t);else if(typeof t=="object")i.extend(!0,this,t);else if(typeof t=="string"){var r=i.parseUrl(t);r?(i.extend(this,r),r.path!==null&&(this.path=r.path,typeof this.path=="string"?this.name=this.path:typeof this.path=="object"&&(this.name=this.path.first))):this.name=t}else typeof t=="function"&&(this.callback=t);return this.protocol=this.protocol||(n?n.protocol.split(":")[0]:"http"),this.hostname=this.hostname||(n?n.hostname:"127.0.0.1"),this.port=parseInt(this.port,10)||(n?n.port:8529),this.name=this.name||"",this},{Connection:o}})